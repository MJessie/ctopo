<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>Starter Template for Bootstrap</title>
    <link type="text/css" rel="stylesheet" href="../css/consolepanel.css" />
    <style>
      /** 清除内外边距 **/
      body{
          margin: 0;
          padding: 0;
          overflow:hidden;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <script type="text/javascript" src="../jquery.min.js"></script>
    <script type="text/javascript" src="../src/consolepanel.js"></script>
    <script type="text/javascript" src="../src/ctopo.js"></script>
    <script type="text/javascript">
      //注意: (1)ConsolePane放在body下面
      //      (2)ConsolePane拖拽滑块的定位还有点问题
      var nodes=[];
      var edges=[];
      var option = {
          id:"canvas",    //说明: canvas标签的id,     写法: canvas , #canvas
          width:"auto",   //说明: canvas的宽度,       写法: 500,500px,50%,auto 
          height:"auto",  //说明: canvas的高度,       写法: 500,500px,50%,auto
          isShowConsolePanel:true,  //说明: 是否显示控制台 默认true, 写法: true,false
          isShowNodeText:false,     //说明: 是否显示节点文字, 默认false, 写法: true,false
          isHoverNodeLight:true,     //说明: 是否悬停节点高亮, 默认true, 写法: true,false
          style:{
            global:{
              backgroundColor:"rgba(255,255,255,1)", //还支持格式 #ffffff
              backgroundImage:"../image/ctopobg.png",
              backgourndImageOpacity:0.5, //backgroundColor灰,白,0.5美观;backgroundColor黑色,蓝色,0.2美观
            },
            node:{
              textColor:"#878787",
              textSize:10,
              color:"#00adee",
              image:"",
              icon:""
            },
            edge:{
              color:"#c2c2c2"
            }
          },
          layout:{
            name:"force", //preset,nestcircle
            param:{
              isRandom:false,       //默认初始位置是随机Random还是定位location
              initAreaW : 100,     //随机分布是的初始宽
              initAreaH : 56,      //随机分布是的初始高
              iterations :150,     //力导向的迭代次数
              ejectFactor : 2,     //默认斥力常量
              ejectRange : 250,    //最大斥力范围,超过的不计算节点间斥力
              ejectFadeRange : 30, //节点簇的减弱范围,此范围内斥力-1
              condenseFactor : 1,  //默认引力常量
              maxtx : 3,           //每次迭代的x方向最大移动距离
              maxty : 1.68         //每次迭代的y方向最大移动距离
            }
          },
          data:{},
          event:{
            //上下左右回调
            steerwheel:function(keyCode){
              //console.log(keyCode);
            },
            //放大,缩小回调
            scale:function(scale){
              //console.log(scale);
            },
            clickNode:function(e,node){
              //alert("clickNode"+node.name+",x="+e.pageX);
            },
            hoverNode:function(e,node){
              //alert("hoverNode"+node.name+",x="+e.pageX);
            },
            leaveNode:function(e){

            }
          }
      };

      $(document).ready(function(){

              $.ajax({url:"data.json",
                 type: "GET",
                 async:false,
                 success:function(data){
              var element = data.element;
              for (var i = 0; i < element.length; i++) {
                var e = element[i];
                e.data.size=e.data.weight;
                delete e.data.color;//="#"+e.data.color;
                e.data.id=e.data.id+"";

                if( e.group == "nodes"){
                  //e.data.image="point.png";
                  e.data.color = "#00adee";
                  e.data.originalColor = e.data.color;
                  nodes.push( e.data );
                }
                if( e.group == "edges" ){
                  e.data.size=1;//e.data.weight;
                  e.data.color="#c2c2c2";
                  e.data.originalColor = e.data.color;
                  edges.push( e.data );
                }
                
              }
            //  for (var i = 0; i < 200; i++) {
            //      nodes.push({x:100,y:100,size:20});
           //   };

              option.data.nodes=nodes;
              option.data.edges=edges;

           
                
                
              
          }});

          //调用topo
          ctopo(option);
      });



      

    </script>
  </body>
</html>

